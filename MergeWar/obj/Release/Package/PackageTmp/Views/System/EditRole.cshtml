@{
    ViewBag.Title = "-修改角色";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@using Common;

<!DOCTYPE html>

<html>
<head>
    <link href="@Url.Content("~/Content/css/common.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/css/style.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Content/js/jquery-1.7.1.min.js")" type="text/javascript"></script>
</head>
<body style="background:none">
   <div class="reveal-modal" style="display: block;">
    <div class="reveal-modal-hd" >
        <a href="javascript:layerClose()"><img src="@Url.Content("~/Content/images/edit_icon.png")"></a>
        修改角色名称
    </div>
    <div style="width:100%;">
        <div class="small-12" style="margin-left: 1.25rem; margin-right: 1.25rem;">
            <dl>
                <dd style="margin-bottom:1.66667rem;">
                    <div class="code-list" style="border-left: 1px solid #ddd;">
                        <table class="table table-hover table-bordered" style="border-bottom: 1px solid #ddd; width: 100%; border-collapse: collapse; border-spacing: 0;">
                            <tbody>
                                    <tr>
                                        <td align="right" width="150px">角色名称：</td>
					                    <td><input type="text" class="_text" name="txtName" maxlength="30" id="txtName" value="@ViewBag.Name" /><span class="color_ccc" id="spName">*</span></td>
                                    </tr>   
                            </tbody>
                        </table>
                    </div>
                </dd>
            </dl>
        </div>
    </div>
    <div class="small-12" style="padding-bottom:1rem;text-align:center">
        <input type="button" onclick="SaveVal()" class="button radius secondary " style="padding: .66667rem 1.33333rem .75rem 1.33333rem; font-size: 1rem;" name="submit" value="保&nbsp;存"/>

    </div>
</div>
<script type="text/javascript">
    function SaveVal() {
        if (ckVal()) {
            $.ajax
            ({
                type: "post",
                url: '@Url.Content("~/System/EditRole")',
                dataType: "json",
                data: {Jid:@ViewBag.Id,Name:$("#txtName").val()},
                success: function (data, status) {
                    if (typeof (data.err) != 'undefined' && data.err != "") {
                        alert(data.err);
                    } else {
                        if (data.result == "OK") {
                            alert("修改成功");  
                            parent.window.location.href='@Url.Content("~/System/RoleList")';
                        } else if (data.result == "NULL") {
                            alert("修改失败");
                        }
                    }
                },
                error: function (data, status, e) {
                    alert(e);
                }
            });
        }
    }

    function ckVal() {
        var result = true;
        var name = $.trim($("#txtname").val());
        if (name == "") 
        {
            $("#spname").html("角色名称不能为空");
        } else {
            $("#spname").html("&nbsp;");
        }

        return result;
    }
   
</script>
</body>
</html>
